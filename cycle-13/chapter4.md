### 4장: 프롬프트 엔지니어링으로 메뉴 이미지 품질 검수하기 요약

이 글은 배달의민족이 **GPT 기술과 프롬프트 엔지니어링을 활용하여 사장님들이 등록하는 메뉴 이미지의 품질을 자동으로 검수하는 시스템을 구축한 경험**을 공유합니다.

#### **문제 상황: 느리고 비효율적인 수동 이미지 검수**

*   **대규모 요청:** 하루에 최소 1만 건 이상의 메뉴 이미지가 등록되어, 운영자가 직접 검수하는 데 시간이 오래 걸렸습니다.
*   **복잡한 기준:** '저화질', '초점 불량', '문자 포함', '저작권 위반' 등 이미지 반려 기준이 다양하고 자주 변경되어, 각각에 맞는 머신러닝(ML) 모델을 만들기 어려웠습니다.

#### **해결 과정: GPT와 프롬프트 엔지니어링**

GPT의 유연성과 상식 기반 추론 능력을 활용하여 이 문제를 해결하고자 했습니다. 핵심은 **프롬프트 엔지니어링**을 통해 GPT가 검수 기준을 정확히 이해하고 일관된 판단을 내리도록 하는 것이었습니다.

*   **전략 1: 구체성과 일반성의 균형**
    *   '저화질' 대신 '주요 객체가 흐리거나 픽셀이 깨져 보이는지'처럼 **구체적으로 프롬프트를 작성**하여 정확도를 높였습니다.
    *   다만, 너무 구체화하면 다른 케이스를 놓치는 문제가 있어(예: '워터마크'만 잡고 다른 합성 글씨는 놓침), **정책별 성능을 지속적으로 평가**하며 균형을 맞췄습니다.

*   **전략 2: 응답 형식 최적화**
    *   **구조화된 출력(JSON):** GPT의 응답을 파싱하기 쉽도록 `JSON` 형식으로 고정하여, 서비스에서 필요한 정보(반려 정책 번호, 사유)만 쉽게 추출할 수 있게 했습니다.
    *   **생성 지식 프롬프트:** 응답의 일관성을 높이기 위해, GPT가 **먼저 이미지 내용을 스스로 설명하게 한 뒤, 그 설명을 바탕으로 최종 판단**을 내리도록 유도했습니다. (일관성 40% 향상)
    *   **지연 시간(Latency) 최적화:** 프롬프트와 응답 길이를 최적화하여 평균 응답 시간을 **60% 단축**했습니다.

*   **전략 3: 프롬프트 구조 개선**
    *   **이미지 우선 배치:** 텍스트보다 이미지를 프롬프트 앞에 두어 GPT의 이해도를 높였습니다.
    *   **마크다운 활용:** 헤더(#), 목록 등 마크다운과 코드 스타일로 프롬프트 구조를 체계화하여 GPT의 이해를 돕고, 사람이 관리하기도 쉽게 만들었습니다.

#### **GPT의 한계와 하이브리드 접근**

프롬프트 엔지니어링만으로 모든 문제를 해결할 수는 없었습니다.

*   **객체 탐지의 한계:** '과도하게 확대된 이미지'처럼 정확한 좌표 인식이 필요한 경우, GPT의 성능이 부족했습니다. → **자체적으로 학습시킨 객체 탐지 모델을 결합**하여 해결했습니다.
*   **최신 정보 부족:** GPT는 최신 캐릭터나 로고를 몰라 '저작권' 검수에 한계가 있었습니다. → **AI가 판단하기 어려운 경우는 사람이 직접 검수하도록 프로세스를 분기**했습니다.

#### **결과 및 교훈**

*   **성과:** 이미지 검수 시간을 **99.9% 단축**했고, 사장님들에게 상세한 반려 사유를 즉시 제공하여 이미지 품질 개선을 도왔습니다. 그 결과, 예상치를 2.3배 뛰어넘는 **90%의 높은 사용률**을 달성했습니다.
*   **핵심 교훈:** GPT는 강력하지만 만능이 아니며, 실제 서비스에 적용하기 위해서는 **기존 ML 모델, 데이터 사이언스, 운영자 검수 등을 결합한 '하이브리드 접근'이 필수적**이라는 점을 확인했습니다.