# 코드에서 UML 다이어그램을 자동 생성하는 방법

## **1. 개요**
- 기존 코드를 분석해서 UML 다이어그램(클래스, 시퀀스, 유스케이스 등)을 자동으로 생성할 수 있음.
- 주로 **정적 분석(Static Analysis)** 방식과 **동적 분석(Dynamic Analysis)** 방식을 활용.
- 자동화 도구를 활용하면 개발자가 직접 UML을 그리지 않아도 코드에서 UML을 추출할 수 있음.

---

## **2. 정적 분석을 통한 UML 생성**
**정적 분석(Static Analysis)**은 코드를 실행하지 않고 소스 코드 자체를 분석하는 방식.

### **방법 1: Python 코드에서 클래스 다이어그램 생성 (PlantUML + Pyreverse 활용)**
**Pyreverse**는 Python 코드에서 UML 클래스를 자동 생성하는 도구.

### **설치 방법**
```bash
pip install pylint
```

### **UML 다이어그램 생성 (예제)**
#### **bank.py 파일 예제**
```python
# bank.py
class BankAccount:
    def __init__(self, balance):
        self.balance = balance

    def deposit(self, amount):
        self.balance += amount

    def withdraw(self, amount):
        if self.balance >= amount:
            self.balance -= amount
            return amount
        else:
            return "잔액 부족"

class SavingsAccount(BankAccount):
    def __init__(self, balance, interest_rate):
        super().__init__(balance)
        self.interest_rate = interest_rate

    def add_interest(self):
        self.balance *= (1 + self.interest_rate)
```

### **Pyreverse를 사용한 UML 생성**
```bash
pyreverse -o png -p BankSystem bank.py
```

### **생성된 UML 클래스 다이어그램**
```
+------------------+
|  BankAccount    |
+------------------+
| - balance: float |
+------------------+
| + deposit()      |
| + withdraw()     |
+------------------+

    ▲
    |
+----------------------+
|  SavingsAccount     |
+----------------------+
| - interest_rate: float |
+----------------------+
| + add_interest()      |
+----------------------+
```

이렇게 **기존 코드에서 UML을 자동 생성하여 가독성을 높이고 문서화할 수 있음.**

---

## **3. 동적 분석을 통한 UML 생성 (실행 중 관계 분석)**
**동적 분석(Dynamic Analysis)** 방식은 프로그램을 실행하면서 객체 간의 상호작용을 추출하여 UML을 생성하는 방법.

### **방법 2: 실행 로그를 활용한 시퀀스 다이어그램 생성**
1. **로그 기록을 추가하여 함수 호출 추적**
   ```python
   class OrderSystem:
       def place_order(self, user, item):
           print(f"[LOG] User {user} ordered {item}")
           self.process_payment(user, item)

       def process_payment(self, user, item):
           print(f"[LOG] Payment processed for {user}")
   ```

2. **실행 후 로그를 기반으로 UML 시퀀스 다이어그램 작성**
   ```plantuml
   @startuml
   actor User
   participant "OrderSystem" as OS

   User -> OS: place_order(user, item)
   OS -> OS: process_payment(user, item)
   @enduml
   ```

위처럼 **실행 중인 코드를 분석하여 시퀀스 다이어그램을 자동 생성**할 수도 있음.

---

## **4. UML 자동 생성 도구 추천**
자동으로 UML을 추출해주는 도구 추천 목록.

| **도구명**  | **설명** |
|-------------|-------------------------------------|
| **Pyreverse** | Python 코드에서 클래스 다이어그램 자동 생성 |
| **PlantUML** | UML 다이어그램을 코드 기반으로 생성 |
| **Doxygen** | C++, Java 등의 코드에서 UML 문서 생성 |
| **StarUML** | GUI 기반으로 UML 모델링 가능 |
| **Visual Paradigm** | Java 프로젝트에서 UML 자동 생성 |
| **IntelliJ IDEA** | Java, Kotlin 등에서 UML 자동 생성 기능 포함 |

이 도구들을 활용하면 기존 코드를 UML로 변환하여 프로젝트 문서화를 쉽게 할 수 있음.

---

## **5. 정리 및 활용 방안**
✅ **정적 분석 (소스 코드 기반) → 클래스 다이어그램 자동 생성**  
✅ **동적 분석 (실행 중 관계 분석) → 시퀀스 다이어그램 자동 생성**  
✅ **자동화 도구 (Pyreverse, PlantUML 등) 활용 → UML 문서화 간소화**  
✅ **코드 구조 분석 → 팀원과의 협업 및 유지보수에 도움**  

이제 UML을 코드에서 자동으로 생성하고 활용할 수 있을 것임!


